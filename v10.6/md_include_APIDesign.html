<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8: The V8 public C++ API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="docs_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header id="header">
  <h1><a href="/api/head">V8</a></h1>
  &#160;<span id="projectnumber">v10.6</span>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">The V8 public C++ API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>The V8 public C++ API aims to support four use cases:</p>
<ol type="1">
<li>Enable applications that embed V8 (called the embedder) to configure and run one or more instances of V8.</li>
<li>Expose ECMAScript-like capabilities to the embedder.</li>
<li>Enable the embedder to interact with ECMAScript by exposing API objects.</li>
<li>Provide access to the V8 debugger (inspector).</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Configuring and running an instance of V8</h1>
<p>V8 requires access to certain OS-level primitives such as the ability to schedule work on threads, or allocate memory.</p>
<p>The embedder can define how to access those primitives via the <a class="el" href="classv8_1_1Platform.html">v8::Platform</a> interface. While V8 bundles a basic implementation, embedders are highly encouraged to implement <a class="el" href="classv8_1_1Platform.html">v8::Platform</a> themselves.</p>
<p>Currently, the <a class="el" href="classv8_1_1ArrayBuffer_1_1Allocator.html">v8::ArrayBuffer::Allocator</a> is passed to the <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a> factory method, however, conceptually it should also be part of the <a class="el" href="classv8_1_1Platform.html">v8::Platform</a> since all instances of V8 should share one allocator.</p>
<p>Once the <a class="el" href="classv8_1_1Platform.html">v8::Platform</a> is configured, an <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a> can be created. All further interactions with V8 should explicitly reference the <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a> they refer to. All API methods should eventually take an <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a> parameter.</p>
<p>When a given instance of V8 is no longer needed, it can be destroyed by disposing the respective <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a>. If the embedder wishes to free all memory associated with the <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a>, it has to first clear all global handles associated with that <a class="el" href="classv8_1_1Isolate.html">v8::Isolate</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
ECMAScript-like capabilities</h1>
<p>In general, the C++ API shouldn't enable capabilities that aren't available to scripts running in V8. Experience has shown that it's not possible to maintain such API methods in the long term. However, capabilities also available to scripts, i.e., ones that are defined in the ECMAScript standard are there to stay, and we can safely expose them to embedders.</p>
<p>The C++ API should also be pleasant to use, and not require learning new paradigms. Similarly to how the API exposed to scripts aims to provide good ergonomics, we should aim to provide a reasonable developer experience for this API surface.</p>
<p>ECMAScript makes heavy use of exceptions, however, V8's C++ code doesn't use C++ exceptions. Therefore, all API methods that can throw exceptions should indicate so by returning a <a class="el" href="classv8_1_1Maybe.html">v8::Maybe</a>&lt;&gt; or <a class="el" href="classv8_1_1MaybeLocal.html">v8::MaybeLocal</a>&lt;&gt; result, and by taking a <a class="el" href="classv8_1_1Local.html">v8::Local</a>&lt;<a class="el" href="classv8_1_1Context.html">v8::Context</a>&gt; parameter that indicates in which context a possible exception should be thrown.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
API objects</h1>
<p>V8 allows embedders to define special objects that expose additional capabilities and APIs to scripts. The most prominent example is exposing the HTML DOM in Blink. Other examples are e.g. node.js. It is less clear what kind of capabilities we want to expose via this API surface. As a rule of thumb, we want to expose operations as defined in the WebIDL and HTML spec: we assume that those requirements are somewhat stable, and that they are a superset of the requirements of other embedders including node.js.</p>
<p>Ideally, the API surfaces defined in those specs hook into the ECMAScript spec which in turn guarantees long-term stability of the API.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
The V8 inspector</h1>
<p>All debugging capabilities of V8 should be exposed via the inspector protocol. The exception to this are profiling features exposed via <a class="el" href="v8-profiler_8h.html">v8-profiler.h</a>. Changes to the inspector protocol need to ensure backwards compatibility and commitment to maintain. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<footer id="footer">
<small>
<address>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.6
</address>
</small>
<p>
  <small>Except as otherwise noted, any code samples from the V8 project are licensed under <a href="https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE">V8â€™s BSD-style license</a>. Other content on this page is licensed under <a href="https://creativecommons.org/licenses/by/3.0/">the Creative Commons Attribution 3.0 License</a>. For details, see <a href="/terms#site-policies">our site policies</a>.</small>
</p>
</footer>
</body>
</html>
